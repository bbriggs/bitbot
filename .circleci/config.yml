version: 2.1
orbs:
  webhook: eddiewebb/webhook@0.0.4

jobs:
  run_unit_tests:
    docker:
        - image: circleci/golang:1.12
    steps:
     - checkout
     - run:
        name: Run unit tests
        command: go test -v ./...
     - webhook/notify:
          endpoint: 'http://d80ae2c5.ngrok.io/api/v1/circle/webhooks'
workflows:
  version: 2
  default:
    jobs:
        - run_unit_tests
